(function(){Thread=function(a){if("function"===typeof a||a instanceof HTMLScriptElement){a="function"===typeof a?a.toString().match(/^function\s*\([^\)]*\)\s*\{\s*((\S|\s)*\S)\s*\}$/)[1]:a.textContent.match(/^\s*(.+)\s*$/)[1];if(""===a)throw new ThreadError("could not create thread, script does not contain any commands");var c=window.URL.createObjectURL(new Blob([a],{type:"application/javascript"}));delete a}else if("string"===typeof a){a=a.match(/\S+/);if(!a)throw new ThreadError("could not create thread, passed argument does not contain any file name");
c=a[0]}else throw new ThreadError("could not create thread, passed argument is neither a function nor a script element nor a file");var d=!0,b=new Worker(c);b.addEventListener("error",function(a){b.terminate();window.URL.revokeObjectURL(c);d=null;delete b;throw new ThreadError("thread terminated in "+a.filename+" on line "+a.lineno+" with the following message: "+a.message);},!1);this.getStatus=function(){return d};this.kill=function(){return d?(b.terminate(),window.URL.revokeObjectURL(c),d=!1,delete b,
!0):null};this.postMessage=function(a){d&&b.postMessage(a)};this.addEventListener=function(a,c,e){return d?b.addEventListener(a,c,e):null};this.removeEventListener=function(a,c,e){return d?b.removeEventListener(a,c,e):null};this.dispatchEvent=function(a){return d?b.dispatchEvent(a):null};Object.defineProperty(this,"status",{get:function(){return this.getStatus()}})};Thread.kill=function(a){return a instanceof Thread?a.kill():!1};ThreadError=function(a){a=a||"unknown error";this.toString=function(){return"ThreadError: "+
a}}})();
